{% extends 'shop/basic.html' %}
{% block css %}
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

/* ===== Global Background ===== */
body {
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    min-height: 100vh;
    font-family: 'Poppins', sans-serif;
}

/* ===== Card Grid / spacing ===== */
.col-md-3 {
    display: inline-block;
    perspective: 1200px;
    margin: 15px; /* space around each card */
    vertical-align: top;
}

/* ===== Carousel Inner spacing ===== */
.carousel-inner .col-md-3 {
    padding: 10px;
}

/* ===== Card (COURSE BLOCK) ===== */
.card {
    background: #ffffff; /* white background */
    border-radius: 18px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    transform-style: preserve-3d;
    transition:
        transform 0.6s ease,
        box-shadow 0.6s ease,
        background 0.4s ease;
    font-family: 'Poppins', sans-serif;
    padding: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    margin-bottom: 20px; /* vertical spacing between rows */
}

/* ===== 3D Hover Effect ===== */
.card:hover {
    transform: rotateX(6deg) rotateY(-6deg) scale(1.04);
    box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}

/* ===== CLICK (ACTIVE) EFFECT ===== */
.card:active {
    transform: scale(0.97);
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

/* ===== Image ===== */
.card-img-top {
    height: 188px;
    width: 100%;
    object-fit: cover;
    border-radius: 18px 18px 0 0;
    transform: translateZ(25px);
    transition: transform 0.5s ease;
}

.card:hover .card-img-top {
    transform: translateZ(45px) scale(1.03);
}

/* ===== Card Body ===== */
.card-body {
    color: #000000; /* black text */
    transform: translateZ(20px);
    padding: 15px;
}

/* ===== Title ===== */
.card-title {
    font-weight: 600;
    letter-spacing: 0.5px;
    color: #000000; /* black title */
}

/* ===== Button ===== */
.card .btn {
    background: linear-gradient(135deg, #ff4d4d, #b30000);
    border: none;
    border-radius: 30px;
    padding: 8px 18px;
    color: #fff;
    font-weight: 500;
    transition: all 0.4s ease;
}

/* Button click red glow */
.card .btn:active {
    transform: scale(0.9);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.9);
}

/* ===== Smooth Padding Fix ===== */
body .no-padding {
    padding-left: 0;
    padding-right: 0;
}

/* ===== Optional: small font adjustments ===== */
.card-text {
    font-size: 14px;
    color: #333;
}
{% endblock %}


{% block body %}
{% load static %}
<div class="container">

    <!--Slideshow starts here -->
    {% for product, range, nSlides in allProds %}

    <h5 class="my-4">{{product.0.category}}</h5>   <!--karan proct madhe prod1,prod 2 asu shktat tyamule product 0 mhanje pahila product-->
       <div id="demo{{forloop.counter}}" class="carousel slide my-3" data-ride="carousel">   <!-- slite automatiic run-->
    <ul class="carousel-indicators">     <!--slide active आहे ते दाखवतात-->
      <li data-target="#demo{{forloop.counter}}" data-slide-to="0" class="active"></li>   <!--no of slides-->

       {% for i in range %}
      <li data-target="#demo{{forloop.parentloop.counter}}" data-slide-to="{{i}}" ></li>    <!-- slide che dot -->
      {% endfor %}
    </ul>


    <div class="container carousel-inner no-padding">

      <div class="carousel-item active">   <!-- no of slide pages generate -->


        {% for i in product%}
        <div class="col-xs-3 col-sm-3 col-md-3">
          <div class="card" style="width: 18rem;">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRxXYmX13SW2AArh-n0UteHe0YNKs-I9Mv2fw&s" class="card-img-top" alt="cours image">
            <div class="card-body">
              <h5 class="card-title">{{i.course_name}}</h5>
                <form action="{% url 'addcourse' %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="id" value="{{ i.id }}">
              <button  class="btn btn-primary cart" type="submit"> Add To cours</button>
                    </form>
            </div>
          </div>
        </div>
        {% if forloop.counter|divisibleby:4 and forloop.counter > 0 and not forloop.last %}
      </div><div class="carousel-item">   <!--चालू slide बंद होतो नवीन slide सुरू होतो -->
        {% endif %}


        {% endfor %}
    </div>



</div>
</div>
    <!-- left and right controls for the slide -->
    <a class="carousel-control-prev" href="#demo{{forloop.counter}}" data-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#demo{{forloop.counter}}" data-slide="next">
        <span class="carousel-control-next-icon"></span>
    </a>
    {% endfor %}
</div>
{% endblock %}
    {% block js %}
<script>
console.log('working');
if(localStorage.getItem('cart') == null){         // card is user class dedined into button
var cart = {};
}
else
{
cart = JSON.parse(localStorage.getItem('cart'));

}
$('.cart').click(function(){
console.log('clicked');
var idstr = this.id.toString();
console.log(idstr);
if (cart[idstr] !=undefined){
cart[idstr] = cart[idstr] + 1;
}
else
{
cart[idstr] = 1;
}
console.log(cart);
localStorage.setItem('cart', JSON.stringify(cart));
document.getElementById('cart').innerHTML = Object.keys(cart).length;
});
</script>
{% endblock %}
